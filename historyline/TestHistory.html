<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试历史轨迹页面嵌入</title>
    <style>
        html, body, iframe {
            width: 100%;
            height: 100%;
            border: none;
            overflow: hidden;
            padding: 0 0 0 0;
            margin: 0 0 0 0;
        }
    </style>
    <script type="text/javascript">
        //父页面定义的全局变量，当通过iframe嵌入“历史轨迹”子页面时，先给该变量赋值，子页面初始化时会加载变量的值。
        var historyData = [
            {
                "id": "xc-route-1",
                "name": "巡查路线1",
                "x": 116.5131896508,
                "y": 27.7285310519,
                "date": "2017-08-10",
                "path": [
                    {
                        "id": "xc-route-1-node-1",
                        "date": "2017-08-10 14:36:48",
                        "x": 116.5131896508,
                        "y": 27.7285310519,
                        "node": "启闭房",
                        "level": 2, //巡查点等级：0-参考巡查点，1-一般巡查点，2-重点巡查点
                        "desc": "重点巡查点"
                    }, {
                        "id": "xc-route-1-node-2",
                        "date": "2017-08-10 15:36:48",
                        "x": 116.5140479577,
                        "y": 27.7285690389,
                        "node": "坝顶",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-1-node-3",
                        "date": "2017-08-10 16:36:48",
                        "x": 116.5144341958,
                        "y": 27.7292148164,
                        "node": "涵洞口",
                        "level": 0,
                        "desc": "参考巡查点"
                    }, {
                        "id": "xc-route-1-node-4",
                        "date": "2017-08-10 17:36:48",
                        "x": 116.5173938280,
                        "y": 27.7249198912,
                        "node": "溢洪道",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-1-node-5",
                        "date": "2017-08-10 18:36:48",
                        "x": 116.5164929458,
                        "y": 27.7273107506,
                        "node": "背水面坝脚",
                        "level": 1,
                        "desc": "一般巡查点"
                    }
                ],
                "planPath": [
                    {
                        "id": "xc-route-1-node-1",
                        "date": "2017-08-10 14:36:48",
                        "x": 116.5131896508,
                        "y": 27.7285310519,
                        "node": "启闭房",
                        "level": 2,
                        "desc": "重点巡查点"
                    }, {
                        "id": "xc-route-1-node-2",
                        "date": "2017-08-10 15:36:48",
                        "x": 116.5146479577,
                        "y": 27.7285790389,
                        "node": "坝顶",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-1-node-3",
                        "date": "2017-08-10 16:36:48",
                        "x": 116.5144341958,
                        "y": 27.7292148164,
                        "node": "涵洞口",
                        "level": 0,
                        "desc": "参考巡查点"
                    }, {
                        "id": "xc-route-1-node-4",
                        "date": "2017-08-10 17:36:48",
                        "x": 116.5174038280,
                        "y": 27.7259298912,
                        "node": "溢洪道",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-1-node-5",
                        "date": "2017-08-10 18:36:48",
                        "x": 116.5164929458,
                        "y": 27.7273107506,
                        "node": "背水面坝脚",
                        "level": 1,
                        "desc": "一般巡查点"
                    }
                ]
            },
            {
                "id": "xc-route-2",
                "name": "巡查路线2",
                "x": 116.5731896508,
                "y": 27.7985310519,
                "date": "2017-08-11",
                "path": [
                    {
                        "id": "xc-route-2-node-1",
                        "date": "2017-08-11 14:36:48",
                        "x": 116.5731896508,
                        "y": 27.7985310519,
                        "node": "启闭房",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-2-node-2",
                        "date": "2017-08-11 15:36:48",
                        "x": 116.5940479577,
                        "y": 27.7685690389,
                        "node": "坝顶",
                        "level": 2,
                        "desc": "重点巡查点"
                    }, {
                        "id": "xc-route-2-node-3",
                        "date": "2017-08-11 16:36:48",
                        "x": 116.4144341958,
                        "y": 27.5292148164,
                        "node": "涵洞口",
                        "level": 0,
                        "desc": "参考巡查点"
                    }, {
                        "id": "xc-route-2-node-4",
                        "date": "2017-08-11 17:36:48",
                        "x": 116.8173938280,
                        "y": 27.3249198912,
                        "node": "溢洪道",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-2-node-5",
                        "date": "2017-08-11 18:36:48",
                        "x": 116.7164929458,
                        "y": 27.7073107506,
                        "node": "背水面坝脚",
                        "level": 1,
                        "desc": "一般巡查点"
                    }
                ],
                "planPath": [
                    {
                        "id": "xc-route-2-node-1",
                        "date": "2017-08-11 14:36:48",
                        "x": 116.5731896508,
                        "y": 27.7985310519,
                        "node": "启闭房",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-2-node-2",
                        "date": "2017-08-11 15:36:48",
                        "x": 116.5940479577,
                        "y": 27.6685690389,
                        "node": "坝顶",
                        "level": 2,
                        "desc": "重点巡查点"
                    }, {
                        "id": "xc-route-2-node-3",
                        "date": "2017-08-11 16:36:48",
                        "x": 116.3144341958,
                        "y": 27.5292148164,
                        "node": "涵洞口",
                        "level": 0,
                        "desc": "参考巡查点"
                    }, {
                        "id": "xc-route-2-node-4",
                        "date": "2017-08-11 17:36:48",
                        "x": 116.6173938280,
                        "y": 27.3749198912,
                        "node": "溢洪道",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-2-node-5",
                        "date": "2017-08-11 18:36:48",
                        "x": 116.7164929458,
                        "y": 27.7073107506,
                        "node": "背水面坝脚",
                        "level": 1,
                        "desc": "一般巡查点"
                    }
                ]
            }
        ];

        //仅供测试变量，全局变量还是historyData，iframe初始化时先给改变量赋值，然后显示页面，如页面嵌入之后需要动态更新历史轨迹路线，参考下面的测试代码。
        var testData = [
            {
                "id": "xc-route-1",
                "name": "巡查路线1",
                "x": 116.5131896508,
                "y": 27.7285310519,
                "date": "2017-08-10",
                "path": [
                    {
                        "id": "xc-route-1-node-1",
                        "date": "2017-08-10 14:36:48",
                        "x": 116.5131896508,
                        "y": 27.7285310519,
                        "node": "启闭房",
                        "level": 2, //巡查点等级：0-参考巡查点，1-一般巡查点，2-重点巡查点
                        "desc": "重点巡查点"
                    }, {
                        "id": "xc-route-1-node-2",
                        "date": "2017-08-10 15:36:48",
                        "x": 116.5140479577,
                        "y": 27.7285690389,
                        "node": "坝顶",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-1-node-3",
                        "date": "2017-08-10 16:36:48",
                        "x": 116.5144341958,
                        "y": 27.7292148164,
                        "node": "涵洞口",
                        "level": 0,
                        "desc": "参考巡查点"
                    }, {
                        "id": "xc-route-1-node-4",
                        "date": "2017-08-10 17:36:48",
                        "x": 116.5173938280,
                        "y": 27.7249198912,
                        "node": "溢洪道",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-1-node-5",
                        "date": "2017-08-10 18:36:48",
                        "x": 116.5164929458,
                        "y": 27.7273107506,
                        "node": "背水面坝脚",
                        "level": 1,
                        "desc": "一般巡查点"
                    }
                ],
                "planPath": [
                    {
                        "id": "xc-route-1-node-1",
                        "date": "2017-08-10 14:36:48",
                        "x": 116.5131896508,
                        "y": 27.7285310519,
                        "node": "启闭房",
                        "level": 2,
                        "desc": "重点巡查点"
                    }, {
                        "id": "xc-route-1-node-2",
                        "date": "2017-08-10 15:36:48",
                        "x": 116.5146479577,
                        "y": 27.7285790389,
                        "node": "坝顶",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-1-node-3",
                        "date": "2017-08-10 16:36:48",
                        "x": 116.5144341958,
                        "y": 27.7292148164,
                        "node": "涵洞口",
                        "level": 0,
                        "desc": "参考巡查点"
                    }, {
                        "id": "xc-route-1-node-4",
                        "date": "2017-08-10 17:36:48",
                        "x": 116.5174038280,
                        "y": 27.7259298912,
                        "node": "溢洪道",
                        "level": 1,
                        "desc": "一般巡查点"
                    }, {
                        "id": "xc-route-1-node-5",
                        "date": "2017-08-10 18:36:48",
                        "x": 116.5164929458,
                        "y": 27.7273107506,
                        "node": "背水面坝脚",
                        "level": 1,
                        "desc": "一般巡查点"
                    }
                ]
            }
        ];

        //调用iframe页面函数
        function test() {
            historyLineIframe.window.hv.fn.getHistoryData('123');
        }
    </script>
</head>
<body>
<button onclick="test()">测试</button>
<iframe name="historyLineIframe" src="index.html"></iframe>
</body>
</html>
